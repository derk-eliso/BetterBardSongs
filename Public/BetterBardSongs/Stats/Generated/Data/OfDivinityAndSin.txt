//-- Spells
new entry "Shout_Bard_Perform_DOS2_1_Whistle"
type "SpellData"
data "SpellType" "Shout"
using "Shout_Bard_Perform_DOS2_1_Whistle"
data "UseCosts" "BonusActionPoint:1"
data "SpellProperties" "IF(HasProficiency('MusicalInstrument',context.Source)):ApplyStatus(PERFORM_POSITIVE,100,-1);IF(not HasProficiency('MusicalInstrument',context.Source)):ApplyStatus(PERFORM_NEGATIVE,100,-1);IF(HasProficiency('MusicalInstrument',context.Source)):ApplyStatus(PERFORM_POSITIVE_DOS2_1,100,2);GROUND:CreateSurface(8,2,DarknessCloud);IF(HasProficiency('MusicalInstrument',context.Source)):ApplyStatus(BLIND_IMMUNE,100, 2)"
data "SpellFlags" "ImmediateCast;HasVerbalComponent;DontAbortPerforming;IsConcentration"
data "SpellContainerID" "Shout_Bard_Perform_DUMP"
data "RequirementConditions" "not HasStatus('PERFORM_POSITIVE')"

new entry "Shout_Bard_Perform_Continue_DOS2_1"
type "SpellData"
data "SpellType" "Shout"
using "Shout_Bard_Perform_Continue_ThePower"
data "SpellProperties" "SetStatusDuration(SELF,PERFORM_POSITIVE_DOS2_1,2)"
data "Icon" "Action_Song_ThePower"
data "DescriptionParams" "'Of Divinity and Sin'"
data "RequirementConditions" "HasStatus('PERFORM_POSITIVE_DOS2_1')"
//------//

//-- Statuses
new entry "PERFORM_POSITIVE_DOS2_1"
type "StatusData"
data "StatusType" "BOOST"
using "PERFORM_POSITIVE_DOS2_1"
data "Icon" "Action_Song_OfDivinityAndSin"
data "Boosts" "UnlockSpell(Shout_Bard_Perform_Continue_DOS2_1)"
data "AuraRadius" "8"
data "AuraStatuses" "TARGET:IF(not HasAnyStatus({'DOS2_JOIN_1','DOS2_JOIN_2','DOS2_JOIN_3'},{},{},context.Source) and Party()):ApplyStatus(DOS2_JOIN_1);IF(Ally() and not Dead()):ApplyStatus(INP_AURA_DOS2_1)"
data "PerformEventName" "Bard_Perform_MainTheme"

new entry "INP_AURA_DOS2_"
type "StatusData"
data "StatusType" "BOOST"
using "BLESS"
data "Icon" "Action_Song_OfDivinityAndSin"
data "DisplayName" "heb8da58501aa4708abcd417ea201d40440ed"
data "Description" "h359d026a395e4113a8ccfc0b6866fa99gac6"
data "DescriptionParams" "'Of Divinity and Sin'"
data "StackId" "BLIND_IMMUNE"
//data "OnApplyFunctors" "ApplyStatus(BLIND_IMMUNE,100,3)"
data "Boosts" "StatusImmunity(BLINDED_DARKNESS);IgnoreSurfaceCover(SurfaceDarknessCloud)"

new entry "BLIND_IMMUNE"
type "StatusData"
data "StatusType" "BOOST"
using "WET"
data "Icon" "PassiveFeature_DevilsSight"
data "DisplayName" "haa7068b6f0a0460c814c018b794faea157fg"
data "Description" "h73a588ef21f34cc9ab3f1d128bd1b1a04116"
data "Boosts" "StatusImmunity(BLINDED_DARKNESS);IgnoreSurfaceCover(SurfaceDarknessCloud)"
data "OnApplyFunctors" ""
data "StackId" "BLIND_IMMUNE"
//------//